#Our CS32 Final Project!!! test

import requests

def search_wikipedia(query):
    # Step 1: Search Wikipedia for the query
    search_url = "https://en.wikipedia.org/w/api.php"
    search_params = {
        "action": "query",
        "list": "search",
        "srsearch": query,
        "format": "json"
    }
    response = requests.get(search_url, params=search_params)
    data = response.json()

    if not data["query"]["search"]:
        print("No results found.")
        return None

    # Get the title of the first search result
    title = data["query"]["search"][0]["title"]
    return title

def get_wikipedia_text(title):
    # Step 2: Fetch the page content in plain text
    content_url = "https://en.wikipedia.org/w/api.php"
    content_params = {
        "action": "query",
        "prop": "extracts",
        "explaintext": True,
        "titles": title,
        "format": "json"
    }
    response = requests.get(content_url, params=content_params)
    data = response.json()

    pages = data["query"]["pages"]
    page = next(iter(pages.values()))
    return page.get("extract", "No text found.")

# Example usage
query = "Ibuprofen"
title = search_wikipedia(query)
if title:
    text = get_wikipedia_text(title)
    print(f"\n--- Wikipedia Article: {title} ---\n")
    print(text)
